---
import { db } from '@lib/database/db';

const versionQuery = db.prepare('SELECT MAX(version) as version FROM schema_migrations');
const versionResult = versionQuery.get() as { version: number } | undefined;
const currentVersion = versionResult?.version || 0;


---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body class="bg-gray-100 font-sans p-6">
		<h1 class="text-3xl font-bold text-center text-gray-800 mb-6">
			Current schema version: <span class="text-blue-600">{currentVersion}</span>
		</h1>
	
		<p class="text-2xl text-gray-700 text-center mb-4">
			Sample API endpoint: 
			<span class="text-blue-700 font-semibold">{Astro.url}api/hello-world</span>
		</p>
	
		<p class="text-gray-600 text-center">
			Useful guides:
		</p>
	
		<ul class="list-disc list-inside text-center mt-2 text-lg">
			<li><a href="https://docs.astro.build/en/guides/endpoints/" class="text-blue-600 hover:underline">Endpoints Guide</a></li>
			<li><a href="https://docs.astro.build/en/guides/environment-variables/" class="text-blue-600 hover:underline">Environment Variables Guide</a></li>
			<li><a href="https://docs.astro.build/en/recipes/bun/" class="text-blue-600 hover:underline">Bun Recipe</a></li>
			<li><a href="https://docs.astro.build/en/guides/routing/" class="text-blue-600 hover:underline">Routing Guide</a></li>
			<li><a href="https://docs.astro.build/en/reference/api-reference/" class="text-blue-600 hover:underline">API Reference</a></li>
		</ul>
	</body>
	
	
</html>